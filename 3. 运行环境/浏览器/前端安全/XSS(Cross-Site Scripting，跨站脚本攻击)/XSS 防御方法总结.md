# [XSS 防御方法总结](https://www.cnblogs.com/xd502djj/p/10786865.html)

1. XSS攻击原理？

    XSS攻击就是攻击者想方设法在用户访问的网页上插入自己的脚本，然后达到在用户访问时执行的目的。

2. XSS存在的根本原因？

    XSS之所以会存在，就是因为服务端对URL、对用户输入的提交给服务器的内容没有进行充分的过滤；但是，其实无论服务端如何过滤，攻击者总会有其他的方法绕过检查，因此需要我们不断更新自身的服务器防御策略；

3. XSS如何防御？

    XSS防御的总体思路：对输入（包括URL参数）进行过滤，对输出进行编码。

    * 对输入和URL参数进行过滤（白名单+黑名单）

        主要是将容易导致XSS攻击的半角字符改成全角字符，< 和 >是脚本执行和各种html标签需要的，也对其进行编码。黑名单针对那么不允许出现的对象，一旦检测到就会进行告警；而白名单则是配置允许出现的内容，如只接受数字或者a-z字符等；

    * 对输出进行编码

        输出数据之前，对潜在威胁的内容进行编码转换、转义是十分有效的措施；

        常见转义规则：

            html标签的转义：如< -> &lt，> -> &gt等等

            js事件转义：\转成\\，/转成\/，半角转全角等

            URL属性：确保img、script等标签的属性值没有恶意链接

    * HttpOnly设置

        一般XSS脚本是读取浏览器中的cookie，而设置了HttpOnly的cookie将不会被js所读取到，但是浏览器能正常使用该cookie；这个方式有一定的防御能力，但是这样设置了之后同样前端也无法使用该cookie，所以要事先沟通好。；一般是敏感信息就设置该属性，而其他的一些需要在应用程序中用js读取的cookie值则不设置。
