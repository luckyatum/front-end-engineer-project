# [漫画：什么是http协议？](https://juejin.im/post/5c889918e51d45346459994d)

建议看原文~

漫画简单解析：

1. 介绍了http协议通信；
2. http协议通信存在问题，就是明文信息可以被第三方截获；
3. 为了解决2的问题，出现了对称加密算法，两者约定一个加密key，加密后传输的信息就不会被解析；
4. 但是3同样存在问题，两者约定key的时候是明文约定的，一旦一开始就被截获到了key，那么加密也没用；
5. 为了解决上述问题，出现了非对称加密算法，算法中会有一对密钥，公钥和私钥，公钥加密的可以被私钥解密，私钥加密的可以被公钥解密；
6. 客户端发送请求到服务端，服务端会先把一个公钥传给客户端，客户端用该公钥加密自己的密钥再回传给服务端，服务端用自己的私钥解密得到密钥，后续两者就通过这个密钥进行传输；
7. 但是，第6步同样存在一个问题，服务端把公钥给客户端的时候，可能会被第三方截获，然后第三方用自己的公钥私钥替换掉服务端的公钥，冒充服务端跟客户端通信；
8. 所以，为了解决第7点问题，客户端必须有一个方法知道接收到的公钥确实是来自服务端的，因此出现了数字证书；
9. 服务端会先把自己公钥和一些其他信息，去找权威机构证明，权威机构会用自己的私钥加密公钥和其他内容，生成数字证书；
10. 客户端第一次访问链接时，浏览器会得到该数字证书，这时候浏览器会去本地的证书列表中去找有没有该机构，有的话表示是可信的；
11. 找到之后，浏览器会利用机构的公钥解密数字证书，得到数字签名和其他的证书内容，然后会校验数字签名是否合法；
12. 数字签名的校验原理，就是权威机构会把一段明文，哈希之后用私钥加密，生成签名，浏览器用机构公钥解密签名得到一段哈希，然后将同样一段明文哈希，得到另一个哈希值，两个哈希进行比对，一致的话表示机构是可信的；
13. 签名校验之后，会查看证书中的网址和当前网址是否一致，会查看证书有效期是否过期，有异常的话同样会提示用户；
14. 都做完了之后，浏览器就可以拿到服务端的公钥了；
15. 最后，浏览器会生成一个随机值，这就是后续和服务端通信的密钥，然后用服务端的公钥进行加密，再传回给服务端，服务端用自己私钥加密得到随机值，也就是密钥，然后用该密钥加密内容，例如页面等等，传回给客户端；